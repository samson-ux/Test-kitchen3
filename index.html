<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chef Claude - AI Recipe Finder</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Lora:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        .font-playfair { font-family: 'Playfair Display', serif; }
        .font-lora { font-family: 'Lora', serif; }
        
        @keyframes blob {
            0%, 100% { transform: translate(0, 0) scale(1); }
            25% { transform: translate(20px, -50px) scale(1.1); }
            50% { transform: translate(-20px, 20px) scale(0.9); }
            75% { transform: translate(50px, 50px) scale(1.05); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(40px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes scaleIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }
        
        .animate-blob { animation: blob 7s infinite; }
        .animate-fadeIn { animation: fadeIn 0.8s ease-out; }
        .animate-slideUp { animation: slideUp 0.6s ease-out; }
        .animate-scaleIn { animation: scaleIn 0.4s ease-out; }
        .animation-delay-2000 { animation-delay: 2s; }
        .animation-delay-4000 { animation-delay: 4s; }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-amber-50 via-orange-50 to-red-50">
    <!-- Animated background -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none">
        <div class="absolute top-20 left-10 w-72 h-72 bg-orange-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob"></div>
        <div class="absolute top-40 right-10 w-72 h-72 bg-amber-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000"></div>
        <div class="absolute -bottom-8 left-1/2 w-72 h-72 bg-red-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-4000"></div>
    </div>

    <div class="relative z-10 container mx-auto px-4 py-12 max-w-5xl">
        <!-- Header -->
        <header class="text-center mb-16 animate-fadeIn">
            <div class="inline-flex items-center justify-center mb-6 bg-gradient-to-r from-orange-500 to-red-500 p-4 rounded-3xl shadow-2xl transform hover:scale-105 transition-transform duration-300">
                <svg class="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                </svg>
            </div>
            <h1 class="text-6xl md:text-7xl font-black mb-4 bg-gradient-to-r from-orange-600 via-red-600 to-orange-600 bg-clip-text text-transparent tracking-tight font-playfair">
                Chef Claude
            </h1>
            <p class="text-xl text-gray-700 font-medium font-lora">
                AI-Powered Recipe Discovery from Your Kitchen
            </p>
        </header>

        <!-- Input Section -->
        <div class="bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl p-8 mb-8 border-2 border-orange-200 animate-slideUp">
            <div class="flex items-center gap-2 mb-6">
                <svg class="w-6 h-6 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path>
                </svg>
                <h2 class="text-2xl font-bold text-gray-800 font-playfair">Your Ingredients</h2>
            </div>

            <div class="flex gap-3 mb-6">
                <input type="text" id="ingredientInput" placeholder="Add an ingredient..." 
                    class="flex-1 px-6 py-4 rounded-2xl border-2 border-orange-200 focus:border-orange-400 focus:outline-none text-lg font-lora">
                <button onclick="addIngredient()" 
                    class="px-8 py-4 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-2xl font-bold hover:shadow-xl transform hover:scale-105 transition-all duration-200 flex items-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                    </svg>
                    Add
                </button>
            </div>

            <div id="ingredientsList" class="flex flex-wrap gap-3 mb-6 min-h-[60px]"></div>

            <div id="errorMessage" class="hidden mb-4 p-4 bg-red-100 border-2 border-red-300 text-red-700 rounded-2xl"></div>

            <button onclick="findRecipes()" id="findRecipesBtn"
                class="w-full py-5 bg-gradient-to-r from-orange-600 to-red-600 text-white text-xl font-bold rounded-2xl hover:shadow-2xl transform hover:scale-[1.02] transition-all duration-200 flex items-center justify-center gap-3">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"></path>
                </svg>
                Discover Recipes
            </button>
        </div>

        <!-- Recipes Container -->
        <div id="recipesContainer" class="hidden space-y-6">
            <h2 class="text-4xl font-black text-center text-gray-800 mb-8 animate-fadeIn font-playfair">
                Your Perfect Recipes
            </h2>
            <div id="recipesList" class="grid md:grid-cols-2 gap-6"></div>
        </div>
    </div>

    <script>
        let ingredients = [];

        document.getElementById('ingredientInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') addIngredient();
        });

        function addIngredient() {
            const input = document.getElementById('ingredientInput');
            const ingredient = input.value.trim().toLowerCase();
            
            if (ingredient && !ingredients.includes(ingredient)) {
                ingredients.push(ingredient);
                input.value = '';
                updateIngredientsList();
                hideError();
            }
        }

        function removeIngredient(ingredient) {
            ingredients = ingredients.filter(i => i !== ingredient);
            updateIngredientsList();
        }

        function updateIngredientsList() {
            const list = document.getElementById('ingredientsList');
            list.innerHTML = ingredients.map((ing, index) => `
                <span class="inline-flex items-center gap-2 px-5 py-3 bg-gradient-to-r from-orange-100 to-red-100 text-orange-900 rounded-full font-semibold shadow-md hover:shadow-lg transition-all animate-scaleIn border-2 border-orange-200"
                    style="animation-delay: ${index * 50}ms">
                    ${ing}
                    <button onclick="removeIngredient('${ing}')" 
                        class="hover:bg-orange-200 rounded-full p-1 transition-colors">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </span>
            `).join('');
        }

        function showError(message) {
            const errorEl = document.getElementById('errorMessage');
            errorEl.textContent = message;
            errorEl.classList.remove('hidden');
        }

        function hideError() {
            document.getElementById('errorMessage').classList.add('hidden');
        }

        async function findRecipes() {
            if (ingredients.length === 0) {
                showError('Please add at least one ingredient');
                return;
            }

            const btn = document.getElementById('findRecipesBtn');
            btn.disabled = true;
            btn.innerHTML = `
                <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-white"></div>
                Discovering Recipes...
            `;
            hideError();

            try {
                const response = await fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        model: 'claude-sonnet-4-20250514',
                        max_tokens: 1000,
                        messages: [{
                            role: 'user',
                            content: `I have these ingredients: ${ingredients.join(', ')}.

Please suggest exactly 5 creative and delicious recipes I can make. For each recipe, provide:
1. Recipe name
2. Brief description (1 sentence)
3. Estimated cooking time
4. Number of servings
5. Additional ingredients needed (if any, or empty array)

Format your response as JSON only, no other text. Use this exact structure:
{
  "recipes": [
    {
      "name": "Recipe Name",
      "description": "Brief description",
      "cookingTime": "30 minutes",
      "servings": 4,
      "additionalIngredients": ["ingredient1", "ingredient2"]
    }
  ]
}`
                        }],
                        system: 'You are a creative chef AI. Respond ONLY with valid JSON, no preamble or markdown formatting.'
                    })
                });

                if (!response.ok) {
                    throw new Error('Failed to get recipes. Please try again.');
                }

                const data = await response.json();
                const textContent = data.content
                    .filter(item => item.type === 'text')
                    .map(item => item.text)
                    .join('');

                let cleanedText = textContent.replace(/```json\n?/g, '').replace(/```\n?/g, '').trim();
                const parsed = JSON.parse(cleanedText);
                
                displayRecipes(parsed.recipes || []);
            } catch (err) {
                showError(err.message || 'Something went wrong. Please try again.');
                console.error('Error:', err);
            } finally {
                btn.disabled = false;
                btn.innerHTML = `
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"></path>
                    </svg>
                    Discover Recipes
                `;
            }
        }

        function displayRecipes(recipes) {
            const container = document.getElementById('recipesContainer');
            const list = document.getElementById('recipesList');
            
            list.innerHTML = recipes.map((recipe, index) => `
                <div class="bg-white/90 backdrop-blur-sm rounded-3xl shadow-xl p-8 border-2 border-orange-100 hover:border-orange-300 hover:shadow-2xl transform hover:scale-[1.02] transition-all duration-300 animate-slideUp"
                    style="animation-delay: ${index * 100}ms">
                    <div class="flex items-start justify-between mb-4">
                        <h3 class="text-2xl font-bold text-gray-800 flex-1 font-playfair">
                            ${recipe.name}
                        </h3>
                        <div class="bg-gradient-to-r from-orange-500 to-red-500 text-white px-4 py-2 rounded-full text-sm font-bold shadow-lg">
                            #${index + 1}
                        </div>
                    </div>
                    
                    <p class="text-gray-600 mb-6 text-lg leading-relaxed font-lora">
                        ${recipe.description}
                    </p>

                    <div class="flex gap-6 mb-6 text-sm text-gray-700">
                        <div class="flex items-center gap-2">
                            <svg class="w-5 h-5 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <span class="font-semibold">${recipe.cookingTime}</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <svg class="w-5 h-5 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                            </svg>
                            <span class="font-semibold">${recipe.servings} servings</span>
                        </div>
                    </div>

                    ${recipe.additionalIngredients && recipe.additionalIngredients.length > 0 ? `
                        <div class="pt-6 border-t-2 border-orange-100">
                            <h4 class="font-bold text-gray-800 mb-3 text-sm uppercase tracking-wide">
                                Additional Ingredients Needed:
                            </h4>
                            <div class="flex flex-wrap gap-2">
                                ${recipe.additionalIngredients.map(item => `
                                    <span class="px-4 py-2 bg-orange-50 text-orange-800 rounded-full text-sm font-medium border border-orange-200">
                                        ${item}
                                    </span>
                                `).join('')}
                            </div>
                        </div>
                    ` : `
                        <div class="pt-6 border-t-2 border-orange-100">
                            <p class="text-green-600 font-semibold flex items-center gap-2">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"></path>
                                </svg>
                                You have everything you need!
                            </p>
                        </div>
                    `}
                </div>
            `).join('');
            
            container.classList.remove('hidden');
            container.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
    </script>
</body>
</html>
